<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

	<!-- block search indexing -->
	<meta name="robots" content="noindex">
	<meta name="googlebot" content="noindex">

  <!-- bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" async>

  <!-- fontawesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" async>

  <!-- google fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin async >
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&display=swap" rel="stylesheet" crossorigin async>
  <link href="https://fonts.googleapis.com/css?family=Livvic:400,400i,500,500i,600&display=swap&subset=vietnamese" rel="stylesheet" crossorigin async>
  <link href="https://fonts.googleapis.com/css?family=Lobster&display=swap" rel="stylesheet" crossorigin async>

  <link rel="alternate" hreflang="en" href="/jekyll-tips" async />

  <link rel="shortcut icon" type="image/x-icon" href="/img/avatar-icon.ico" async>
  <meta name="author" content="Anh-Thi Dinh" />

  <title>
    
      Thi | Jekyll
    
  </title>

  

  <!-- feed -->
  <link rel="alternate" type="application/rss+xml" title="Anh-Thi Dinh - I failed my way to success" href="/feed.xml" async />

  <!-- page (internal) -->
  

  <!-- layout (internal) -->
  
    
      <link rel="stylesheet" href="/css/main.css" async />
    
      <link rel="stylesheet" href="/css/rouge-thi.css" async />
    
  
  

    <!-- Facebook OpenGraph tags -->
  
    <meta property="fb:app_id" content="1150663561751902" />
  

  
    <meta property="fb:admins" content="mrdinhanhthi"/>
  

  
    <meta property="og:title" content="Jekyll" />
  

  
    <meta property="og:description" content="Useful links Using docker to run/deploy jekyll Install and run Jekyll on fresh machine Ubuntu Windows Make jekyll build faster Disable jekyll-feed Sitemap Loop through posts Edit tags for all posts Using markdown syntax inside html tags Check version Link to posts Custom domain &amp;amp; repository with Jekyll sites You...">
  


  <meta property="og:type" content="website" />

  
    <meta property="og:url" content="http://localhost:4000/jekyll-tips" />
    <link rel="canonical" href="http://localhost:4000/jekyll-tips" async />
  

  <meta property="og:image" content="http://localhost:4000/img/background.png" />
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1234">
  <meta property="og:image:height" content="592">

  

  
    <script type="text/javascript">
      window.MathJax = {
        jax: ["input/TeX", "output/SVG"],
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
        SVG: {
          linebreaks: { automatic: true },
          styles: {".MathJax_SVG_Display": {margin: "1rem 0", overflow: "auto"}},
          scale: 90
        }
      };
    </script>
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_SVG">
    </script>
  

  

  

</head>


<body>
  <script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1150663561751902',
      xfbml      : true,
      version    : 'v3.1'
    });
  
    FB.AppEvents.logPageView();
  
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
  <header>
    <nav class="navbar navbar-dark nav-bg navbar-custom fixed-top">
  <div class="container">
    <div class="col-12 col-lg-10 offset-lg-1">
      <div class="nav-container">
        <a class="nav-item" href="http://localhost:4000/">
          <i style="color: #ffeead;" class="fas fa-home" aria-hidden="true"></i>
          <span>Home</span>
        </a>
        <a class="nav-item" href="http://localhost:4000/about">
          <i style="color: #e97c8e;" class="fas fa-fire" aria-hidden="true"></i>
          <span>Me</span>
        </a>
        <a class="nav-item" href="http://localhost:4000/notes">
          <i style="color: #93ceff;" class="fas fa-edit" aria-hidden="true"></i>
          <span>Notes</span>
        </a>
        <div class="nav-search">
          <form action="http://localhost:4000/search" method="get">
            <button class="nav-search-submit" type="submit">
              <i class="fa fa-search" aria-hidden="true"></i>
            </button>
            <input name="q" class="nav-search-input" type="search" placeholder="search notes..." aria-label="search notes...">
          </form>
        </div>
        <a class="nav-item nav-github" href="https://github.com/dinhanhthi" target="_blank">
          <i class="fab fa-github"></i>
        </a>
    </div>
    </div>
  </div>
</nav>

  </header>

  
  <header class="header">
    <div class="container">
      <div class="row align-items-center justify-content-center">
        <div class="col-md-8 header-content">
          
          
            <div class="icon-photo">
              <img src="http://localhost:4000/img/header/jekyll.png">
            </div>
          
          <h1 class="post-title">
            Jekyll
          </h1>
          
            <div class="tag-in-post">
              
              
                
                
                
                
                
                  <a href="/tags#extra">
                    extra
                  </a>
                

              
                
                
                
                
                
                  <a href="/tags#jekyll">
                    jekyll
                  </a>
                

              
                
                
                
                
                
                  <a href="/tags#static-site">
                    static site
                  </a>
                

              
            </div>
          
          <p>
            
              24 Oct 2019
                        
          </p>
        </div>
      </div>
    </div>
  </header>


<main role="main">
  <section class="section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-9">
          <article class="page-content ">
            <p style="font-style: italic; color: #777; font-size: 0.95rem; margin-bottom: 2rem;">
  Last modified on 01 Oct 2021.
</p>




<div id="toc">
  <div class="toc-content">
<ul id="markdown-toc">
  <li><a href="#useful-links" id="markdown-toc-useful-links">Useful links</a></li>
  <li><a href="#using-docker-to-rundeploy-jekyll" id="markdown-toc-using-docker-to-rundeploy-jekyll">Using docker to run/deploy jekyll</a></li>
  <li>
<a href="#install-and-run-jekyll-on-fresh-machine" id="markdown-toc-install-and-run-jekyll-on-fresh-machine">Install and run Jekyll on fresh machine</a>    <ul>
      <li><a href="#ubuntu" id="markdown-toc-ubuntu">Ubuntu</a></li>
      <li><a href="#windows" id="markdown-toc-windows">Windows</a></li>
    </ul>
  </li>
  <li>
<a href="#make-jekyll-build-faster" id="markdown-toc-make-jekyll-build-faster">Make jekyll build faster</a>    <ul>
      <li><a href="#disable-jekyll-feed" id="markdown-toc-disable-jekyll-feed">Disable jekyll-feed</a></li>
    </ul>
  </li>
  <li><a href="#sitemap" id="markdown-toc-sitemap">Sitemap</a></li>
  <li>
<a href="#loop-through-posts" id="markdown-toc-loop-through-posts">Loop through posts</a>    <ul>
      <li><a href="#edit-tags-for-all-posts" id="markdown-toc-edit-tags-for-all-posts">Edit tags for all posts</a></li>
    </ul>
  </li>
  <li><a href="#using-markdown-syntax-inside-html-tags" id="markdown-toc-using-markdown-syntax-inside-html-tags">Using markdown syntax inside html tags</a></li>
  <li><a href="#check-version" id="markdown-toc-check-version">Check version</a></li>
  <li><a href="#link-to-posts" id="markdown-toc-link-to-posts">Link to posts</a></li>
  <li>
<a href="#custom-domain--repository-with-jekyll-sites" id="markdown-toc-custom-domain--repository-with-jekyll-sites">Custom domain &amp; repository with Jekyll sites</a>    <ul>
      <li><a href="#you-dont-have-a-custom-domain" id="markdown-toc-you-dont-have-a-custom-domain">You don’t have a custom domain</a></li>
      <li><a href="#you-have-a-custom-domain" id="markdown-toc-you-have-a-custom-domain">You have a custom domain</a></li>
    </ul>
  </li>
  <li><a href="#using-custom-plugins" id="markdown-toc-using-custom-plugins">Using custom plugins?</a></li>
  <li><a href="#using-_data-with-include" id="markdown-toc-using-_data-with-include">Using <code class="language-plaintext highlighter-rouge">_data</code> with <code class="language-plaintext highlighter-rouge">include</code></a></li>
  <li>
<a href="#create-a-custom-tagsblocks" id="markdown-toc-create-a-custom-tagsblocks">Create a custom tags/blocks</a>    <ul>
      <li><a href="#refs" id="markdown-toc-refs">Refs</a></li>
      <li><a href="#tag-with-single-parameter" id="markdown-toc-tag-with-single-parameter">Tag with single parameter</a></li>
      <li><a href="#tag-with-two-parameters" id="markdown-toc-tag-with-two-parameters">Tag with two parameters</a></li>
      <li><a href="#block-with-single-parameter" id="markdown-toc-block-with-single-parameter">Block with single parameter</a></li>
      <li><a href="#nested-blocks-with-crossed-using-variables" id="markdown-toc-nested-blocks-with-crossed-using-variables">Nested blocks with crossed-using variables</a></li>
      <li><a href="#problem-with-kramdown" id="markdown-toc-problem-with-kramdown">Problem with kramdown</a></li>
    </ul>
  </li>
  <li><a href="#run-with-draft" id="markdown-toc-run-with-draft">Run with draft</a></li>
  <li><a href="#serve-in-background" id="markdown-toc-serve-in-background">Serve in background</a></li>
  <li><a href="#using-markdown-syntax-inside-a-html-tagblock" id="markdown-toc-using-markdown-syntax-inside-a-html-tagblock">Using markdown syntax inside a HTML tag/block</a></li>
  <li><a href="#add-search-with-lunrjs" id="markdown-toc-add-search-with-lunrjs">Add search with lunrjs</a></li>
</ul>

  </div>
</div>

<p>This note is used for you who have already had the basic idea about jekyll and how to create a jekyll site. This note is only for quickly reference.</p>

<h2 id="useful-links">Useful links</h2>

<div class="two-columns-list">
  <ul>
    <li>
<a href="https://www.webfx.com/tools/emoji-cheat-sheet/">Jemoji cheat sheet</a>.</li>
    <li>Link to <a href="https://jekyllrb.com/docs/liquid/tags/#linking-to-posts">post</a> / <a href="https://jekyllrb.com/docs/liquid/tags/#link">page</a>.</li>
    <li>
<a href="https://learn.cloudcannon.com/jekyll-cheat-sheet/">Jekyll cheat sheet</a>.</li>
    <li>
<a href="http://jwarby.github.io/jekyll-pygments-themes/languages/javascript.html">Rouge CSS file theme</a> (Pygment)</li>
    <li>
<a href="http://jch.penibelst.de/">Compress HTML in Jekyll</a>.</li>
    <li>
<a href="https://kramdown.gettalong.org/quickref.html">Kramdown quickref</a>.</li>
    <li>
<a href="https://pages.github.com/versions/">Official dependencies / gems</a> supported by Github Pages.</li>
  </ul>
</div>

<h2 id="using-docker-to-rundeploy-jekyll">Using docker to run/deploy jekyll</h2>

<p>Read this <a href="https://github.com/dinhanhthi/my-dockerfiles/tree/master/quick-jekyll">readme</a>. An example is <a href="https://github.com/dinhanhthi/dinhanhthi.com">repo of this site</a>.</p>

<h2 id="install-and-run-jekyll-on-fresh-machine">Install and run Jekyll on fresh machine</h2>

<h3 id="ubuntu">Ubuntu</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># install ruby-dev</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>ruby-dev

<span class="c"># install bundler</span>
<span class="nb">sudo </span>gem <span class="nb">install </span>bundler

<span class="c"># clone a jekyll theme</span>
<span class="c"># cd to that theme</span>

<span class="c"># install gems in the theme</span>
bundle <span class="nb">install</span> <span class="nt">--path</span> vendor/bundle

<span class="c"># serve</span>
bundle <span class="nb">exec </span>jekyll serve

<span class="c"># If error "ExecJS and could not find a JavaScript runtime"</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>nodejs
</code></pre></div></div>

<h3 id="windows">Windows</h3>

<p>Follow <a href="/docker-wsl2-windows#jekyll-on-wsl2">this guide</a> using WSL2 on Windows.</p>

<h2 id="make-jekyll-build-faster">Make jekyll build faster</h2>

<div class="flex-50">
  <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c"># BENCHMARKING your site</span>
bundle <span class="nb">exec </span>jekyll build <span class="nt">--profile</span>
</code></pre></div>  </div>

  <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c"># clean cache</span>
bundle <span class="nb">exec </span>jekyll clean
</code></pre></div>  </div>
</div>

<ol>
  <li>Disable <code class="language-plaintext highlighter-rouge">jekyll-feed</code>
</li>
  <li>Run <code class="language-plaintext highlighter-rouge">bundle exec jekyll serve -I</code> (wuth <code class="language-plaintext highlighter-rouge">-I</code>) to generate the changed file only. If you create a new file, open a new terminal tab and run <code class="language-plaintext highlighter-rouge">bundle exec jekyll build</code>.</li>
  <li>Upgrade to Jekyll 4.0.</li>
  <li>Add <code class="language-plaintext highlighter-rouge">gem "liquid-c"</code> to <code class="language-plaintext highlighter-rouge">Gemfile</code> and make <code class="language-plaintext highlighter-rouge">bundle update</code>
</li>
  <li>Use <code class="language-plaintext highlighter-rouge">jekyll-include-cache</code> (both in <code class="language-plaintext highlighter-rouge">Gemfile</code> and <code class="language-plaintext highlighter-rouge">_config.yml</code>)</li>
</ol>

<p>Read more in <a href="https://forestry.io/blog/how-i-reduced-my-jekyll-build-time-by-61/">this article</a>.</p>

<h3 id="disable-jekyll-feed">Disable jekyll-feed</h3>

<ol>
  <li>Comment line <code class="language-plaintext highlighter-rouge">jekyll-feed</code> in <code class="language-plaintext highlighter-rouge">Gemfile</code>
</li>
  <li>Comment line <code class="language-plaintext highlighter-rouge">jekyll-feed</code> in <code class="language-plaintext highlighter-rouge">_config.yml</code>
</li>
  <li>Rebuild.</li>
</ol>

<h2 id="sitemap">Sitemap</h2>

<p>If in <a href="https://github.com/jekyll/jekyll-sitemap">sitemap</a>, there is error like <code class="language-plaintext highlighter-rouge">&lt;loc&gt;/reading&lt;/loc&gt;</code>, check your <code class="language-plaintext highlighter-rouge">_config.yml</code> + make sure there is an url inside <code class="language-plaintext highlighter-rouge">url</code> field.</p>

<h2 id="loop-through-posts">Loop through posts</h2>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">post</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">site.posts</span><span class="w"> </span><span class="p">%}</span>
  <span class="p">{{</span><span class="w"> </span><span class="nv">post</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div></div>

<p>List all posts in each category,</p>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">category</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">site.data.categories</span><span class="w"> </span><span class="p">%}</span>
  <span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">site</span><span class="p">.</span><span class="nv">categories</span><span class="p">[</span><span class="nv">category</span><span class="p">.</span><span class="nv">name</span><span class="p">].</span><span class="nf">size</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">post</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">site.categories[category.name]</span><span class="w"> </span><span class="p">%}</span>
      <span class="p">{{</span><span class="w"> </span><span class="nv">post</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
    <span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
  <span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div></div>

<p>List all posts in ABC order<sup><a href="https://stackoverflow.com/questions/39922776/how-to-sort-site-posts-alphabetically-by-post-title-in-jekyll%20" target="_blank">[ref]</a></sup>
,</p>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="nv">sortedPosts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">site</span><span class="p">.</span><span class="nv">posts</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">sort</span><span class="p">:</span><span class="w"> </span><span class="s1">'title'</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">post</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">sortedPosts</span><span class="w"> </span><span class="p">%}</span>
  <span class="p">{{</span><span class="w"> </span><span class="nv">post</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div></div>

<p>List of categories and tags in a single line with commas,</p>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">category</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">site.categories</span><span class="w"> </span><span class="na">reversed</span><span class="w"> </span><span class="p">%}{%</span><span class="w"> </span><span class="nt">capture</span><span class="w"> </span><span class="nv">category_name</span><span class="w"> </span><span class="p">%}{{</span><span class="w"> </span><span class="nv">category</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">first</span><span class="w"> </span><span class="p">}}{%</span><span class="w"> </span><span class="nt">endcapture</span><span class="w"> </span><span class="p">%}</span>&lt;a href="<span class="p">{{</span><span class="nv">site</span><span class="p">.</span><span class="nv">url</span><span class="p">}}{{</span><span class="nv">site</span><span class="p">.</span><span class="nv">baseurl</span><span class="p">}}</span>/#<span class="p">{{</span><span class="nv">category_name</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">replace</span><span class="p">:</span><span class="w"> </span><span class="s2">" "</span><span class="p">,</span><span class="s2">"_"</span><span class="p">}}</span>"&gt;<span class="p">{{</span><span class="w"> </span><span class="nv">category_name</span><span class="w"> </span><span class="p">}}</span>&lt;/a&gt;<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nb">forloop.length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nb">forloop.last</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">%}</span>, <span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>.<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div></div>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">tag</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">site.tags</span><span class="w"> </span><span class="p">%}{%</span><span class="w"> </span><span class="nt">capture</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="p">%}{{</span><span class="nv">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">slice</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">}}{%</span><span class="w"> </span><span class="nt">endcapture</span><span class="w"> </span><span class="p">%}{%</span><span class="w"> </span><span class="nt">capture</span><span class="w"> </span><span class="nv">testup</span><span class="w"> </span><span class="p">%}{{</span><span class="nv">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">slice</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">upcase</span><span class="p">}}{%</span><span class="w"> </span><span class="nt">endcapture</span><span class="w"> </span><span class="p">%}</span>&lt;a href="#<span class="p">{{</span><span class="nv">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nf">slugify</span><span class="p">}}{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">testup</span><span class="w"> </span><span class="p">%}</span>_cap<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}</span>"&gt;<span class="p">{{</span><span class="nv">tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]}}</span>&lt;/a&gt;<span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nb">forloop.length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nb">forloop.last</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">%}</span>, <span class="p">{%</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">%}</span>.<span class="p">{%</span><span class="w"> </span><span class="kr">endif</span><span class="w"> </span><span class="p">%}{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div></div>

<h3 id="edit-tags-for-all-posts">Edit tags for all posts</h3>

<p>Read <a href="https://github.com/dinhanhthi/dinhanhthi.com/blob/master/pages/tags.html">this source code</a>.</p>

<h2 id="using-markdown-syntax-inside-html-tags">Using markdown syntax inside html tags</h2>

<p>You can use directly by</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;span</span> <span class="na">markdown=</span><span class="s">"span"</span><span class="nt">&gt;&lt;/span&gt;</span>
<span class="nt">&lt;div</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p>of only once,</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{::options parse_block_html="true" /}
<span class="c">&lt;!-- other html + markdown inside --&gt;</span>
</code></pre></div></div>

<p>Or even shorter,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Testing {::nomarkdown}**see**{:/} and test.
</code></pre></div></div>

<h2 id="check-version">Check version</h2>

<ul>
  <li>Local gems: <code class="language-plaintext highlighter-rouge">gem list jekyll</code>.</li>
  <li>Current jekyll version of website: check <code class="language-plaintext highlighter-rouge">Gemfile</code>. Need to run <code class="language-plaintext highlighter-rouge">bundle update</code> if change any version in this file.</li>
</ul>

<h2 id="link-to-posts">Link to posts</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Name of Link]({% post_url 2010-07-21-name-of-post %})
</code></pre></div></div>

<p>Edit this post on github (put below link in your post layout),</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://github.com/dinhanhthi/dinhanhthi.com/edit/master/{{path.path}}
</code></pre></div></div>

<h2 id="custom-domain--repository-with-jekyll-sites">Custom domain &amp; repository with Jekyll sites</h2>

<p>There are several choices for you to choose, it depends on your need.</p>

<h3 id="you-dont-have-a-custom-domain">You don’t have a custom domain</h3>

<ol>
  <li>Suppose your github account is <code class="language-plaintext highlighter-rouge">&lt;username&gt;</code>.</li>
  <li>Create a repo <code class="language-plaintext highlighter-rouge">&lt;username&gt;.github.io</code>.</li>
  <li>Put your site in branch <code class="language-plaintext highlighter-rouge">master</code> (default).</li>
  <li>Your site is published at <code class="language-plaintext highlighter-rouge">https://&lt;username&gt;.github.io</code>
</li>
</ol>

<p>If you wanna store your site in a custom repo, e.g. <code class="language-plaintext highlighter-rouge">mysite</code>:</p>

<ol>
  <li>Create a branch <code class="language-plaintext highlighter-rouge">gh-pages</code> + set it as default + store your site here.</li>
  <li>Remove content at <code class="language-plaintext highlighter-rouge">url:</code> in <code class="language-plaintext highlighter-rouge">_config.yml</code>.</li>
  <li>Your site is live at <code class="language-plaintext highlighter-rouge">https://&lt;username&gt;.github.io/mysite/</code>
</li>
</ol>

<h3 id="you-have-a-custom-domain">You have a custom domain</h3>

<ol>
  <li>Create file <code class="language-plaintext highlighter-rouge">CNAME</code> at root and put <code class="language-plaintext highlighter-rouge">&lt;customdomain&gt;.com</code> in it.</li>
  <li>Create <code class="language-plaintext highlighter-rouge">A</code> or <code class="language-plaintext highlighter-rouge">CNAME</code> record in DNS provider. Check <a href="https://help.github.com/en/github/working-with-github-pages/managing-a-custom-domain-for-your-github-pages-site">more</a>.</li>
  <li>You can also use <a href="http://netlify.com">netlify</a> to set all things up automatically.</li>
</ol>

<h2 id="using-custom-plugins">Using custom plugins?</h2>

<ol>
  <li>Build your site locally and get a folder <code class="language-plaintext highlighter-rouge">_site</code>.</li>
  <li>Put it to github and see the results.</li>
</ol>

<p>You can also use <a href="https://netlify.com"><code class="language-plaintext highlighter-rouge">netlify</code></a>, it accepts custom plugin as well.</p>

<h2 id="using-_data-with-include">Using <code class="language-plaintext highlighter-rouge">_data</code> with <code class="language-plaintext highlighter-rouge">include</code>
</h2>

<p>You can use,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% include proud-of.html data=site.data.proudof-notes %}
</code></pre></div></div>

<p>where there is a data file located in <code class="language-plaintext highlighter-rouge">_data/proudof-notes.yml</code>.</p>

<h2 id="create-a-custom-tagsblocks">Create a custom tags/blocks</h2>

<h3 id="refs">Refs</h3>

<ul>
  <li>
<a href="https://jekyllrb.com/docs/plugins/tags/">Official Jekyll guid</a>.</li>
  <li>
<a href="https://blog.sverrirs.com/2016/04/custom-jekyll-tags.html">How to create customizable Liquid tags</a> in Jekyll by Sverrir Sigmundarson.</li>
  <li>
<a href="http://mikelui.io/2018/07/22/jekyll-nested-blocks.html">Creating an Accordion Plugin for Jekyll</a> by Mike Lui.</li>
</ul>

<h3 id="tag-with-single-parameter">Tag with single parameter</h3>

<div class="d-md-flex">
  <div class="language-plaintext flex-even overflow-auto pr-md-1 highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>{% render_time page rendered at: %}
</code></pre></div>  </div>

  <div class="language-html flex-even pl-md-1 overflow-auto highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>page rendered at: Tue June 22 23:38:47 –0500 2010
</code></pre></div>  </div>
</div>

<p>Inside folder <code class="language-plaintext highlighter-rouge">_plugins</code>, create a file <code class="language-plaintext highlighter-rouge">thi_single_tag.rb</code> whose content is,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">class</span> <span class="nc">RenderTimeTag</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Tag</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
      <span class="k">super</span>
      <span class="vi">@text</span> <span class="o">=</span> <span class="n">text</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
      <span class="s2">"</span><span class="si">#{</span><span class="vi">@text</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="si">}</span><span class="s2">"</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="p">.</span><span class="nf">register_tag</span><span class="p">(</span><span class="s1">'render_time'</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">RenderTimeTag</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="tag-with-two-parameters">Tag with two parameters</h3>

<div class="d-md-flex">
  <div class="language-plaintext flex-even overflow-auto pr-md-1 highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>{% badge update | green %}
</code></pre></div>  </div>

  <div class="language-html flex-even pl-md-1 overflow-auto highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"tbadge badge-green"</span><span class="nt">&gt;</span>update<span class="nt">&lt;/span&gt;</span>
</code></pre></div>  </div>
</div>

<p>Inside folder <code class="language-plaintext highlighter-rouge">_plugins</code>, create a file <code class="language-plaintext highlighter-rouge">thi_badge.rb</code> whose content is,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Badge</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Tag</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
    <span class="k">super</span>
    <span class="vi">@input</span> <span class="o">=</span> <span class="n">input</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
    <span class="c1"># Split the input variable (omitting error checking)</span>
    <span class="n">input_split</span> <span class="o">=</span> <span class="n">split_params</span><span class="p">(</span><span class="vi">@input</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">input_split</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">strip</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">input_split</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">strip</span>

    <span class="c1"># Write the output HTML string</span>
    <span class="n">output</span> <span class="o">=</span> <span class="o">&lt;&lt;~</span><span class="no">EOS</span><span class="sh">
      &lt;span class="tbadge badge-</span><span class="si">#{</span><span class="n">color</span><span class="si">}</span><span class="sh">"&gt;</span><span class="si">#{</span><span class="n">text</span><span class="si">}</span><span class="sh">&lt;/span&gt;
</span><span class="no">    EOS</span>

    <span class="c1"># Render it on the page by returning it</span>
    <span class="k">return</span> <span class="n">output</span><span class="p">;</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">split_params</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">"|"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="p">.</span><span class="nf">register_tag</span><span class="p">(</span><span class="s1">'badge'</span><span class="p">,</span> <span class="no">Badge</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="block-with-single-parameter">Block with single parameter</h3>

<p>For example, we wanna create a custom block <code class="language-plaintext highlighter-rouge">alertbox</code> using <a href="https://getbootstrap.com/docs/4.1/components/alerts/">class from Bootstrap</a>.</p>

<div class="d-md-flex">
  <div class="language-plaintext flex-even overflow-auto pr-md-1 highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>{% alertbox warning %}
Content
{% endalertbox %}
</code></pre></div>  </div>

  <div class="language-html flex-even pl-md-1 overflow-auto highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"alert alert-warning"</span> <span class="na">role=</span><span class="s">"alert"</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>
Content
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>  </div>
</div>

<p>Inside folder <code class="language-plaintext highlighter-rouge">_plugins</code>, create a file <code class="language-plaintext highlighter-rouge">thi_alert.rb</code> whose content is,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">class</span> <span class="nc">Alertbox</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Block</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">liquid_options</span><span class="p">)</span>
      <span class="k">super</span>
      <span class="vi">@input</span> <span class="o">=</span> <span class="n">input</span><span class="p">.</span><span class="nf">strip</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
      <span class="n">content</span> <span class="o">=</span> <span class="k">super</span>

      <span class="k">case</span> <span class="vi">@input</span>
      <span class="k">when</span> <span class="s2">"warning"</span>
        <span class="n">box_type</span> <span class="o">=</span> <span class="s1">'warning'</span>
      <span class="k">when</span> <span class="s2">"success"</span>
        <span class="n">box_type</span> <span class="o">=</span> <span class="s1">'success'</span>
      <span class="k">when</span> <span class="s2">"primary"</span>
        <span class="n">box_type</span> <span class="o">=</span> <span class="s1">'primary'</span>
      <span class="k">when</span> <span class="s2">"secondary"</span>
        <span class="n">box_type</span> <span class="o">=</span> <span class="s1">'secondary'</span>
      <span class="k">when</span> <span class="s2">"danger"</span>
        <span class="n">box_type</span> <span class="o">=</span> <span class="s1">'danger'</span>
      <span class="k">when</span> <span class="s2">"info"</span>
        <span class="n">box_type</span> <span class="o">=</span> <span class="s1">'info'</span>
      <span class="k">when</span> <span class="s2">"light"</span>
        <span class="n">box_type</span> <span class="o">=</span> <span class="s1">'light'</span>
      <span class="k">when</span> <span class="s2">"dark"</span>
        <span class="n">box_type</span> <span class="o">=</span> <span class="s1">'dark'</span>
      <span class="k">end</span>

      <span class="n">output</span> <span class="o">=</span> <span class="o">&lt;&lt;~</span><span class="no">EOS</span><span class="sh">
        &lt;div class="alert alert-</span><span class="si">#{</span><span class="n">box_type</span><span class="si">}</span><span class="sh">" markdown="1"&gt;
          </span><span class="si">#{</span><span class="n">content</span><span class="si">}</span><span class="sh">
        &lt;/div&gt;
</span><span class="no">      EOS</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="p">.</span><span class="nf">register_tag</span><span class="p">(</span><span class="s1">'alertbox'</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">AlertBox</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="nested-blocks-with-crossed-using-variables">Nested blocks with crossed-using variables</h3>

<p>A more complicated example, suppose that you wanna create a <strong class="tbrown">hide/show box</strong> using <a href="https://getbootstrap.com/docs/4.1/components/collapse/">Bootstrap’s Collapse</a>, you can use below shortcode. Its advantage is that you don’t have to put manually the <code class="language-plaintext highlighter-rouge">id</code> for each box! Wonderful!</p>

<div class="d-md-flex">
  <div class="language-plaintext flex-even overflow-auto pr-md-1 highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>{% hsbox %}

{% hstitle %}
Box's title
{% endhstitle %}

{% hscontent %}
Box's content.
{% endhscontent %}

{% endhsbox %}
</code></pre></div>  </div>

  <div class="language-html flex-even overflow-auto pl-md-1 highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"hide-show-box"</span><span class="nt">&gt;</span>
<span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">markdown=</span><span class="s">"1"</span> <span class="na">class=</span><span class="s">"btn collapsed box-button"</span> <span class="na">data-toggle=</span><span class="s">"collapse"</span> <span class="na">data-target=</span><span class="s">"#box1ct"</span><span class="nt">&gt;</span>
Box's title
<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"box1ct"</span> <span class="na">markdown=</span><span class="s">"1"</span> <span class="na">class=</span><span class="s">"collapse multi-collapse box-content"</span><span class="nt">&gt;</span>
Box's content.
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>  </div>
</div>

<p>Inside folder <code class="language-plaintext highlighter-rouge">_plugins</code>, create a file <code class="language-plaintext highlighter-rouge">thi_hideshowbox.rb</code> whose content is,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">class</span> <span class="nc">HideShowBox</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Block</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">contain</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
      <span class="k">super</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">generate_box_id</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
      <span class="n">charset</span> <span class="o">=</span> <span class="no">Array</span><span class="p">(</span><span class="s1">'A'</span><span class="o">..</span><span class="s1">'Z'</span><span class="p">)</span> <span class="o">+</span> <span class="no">Array</span><span class="p">(</span><span class="s1">'a'</span><span class="o">..</span><span class="s1">'z'</span><span class="p">)</span>
      <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="p">{</span> <span class="n">charset</span><span class="p">.</span><span class="nf">sample</span> <span class="p">}.</span><span class="nf">join</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
      <span class="n">context</span><span class="p">.</span><span class="nf">stack</span> <span class="k">do</span>
        <span class="n">context</span><span class="p">[</span><span class="s2">"boxID"</span><span class="p">]</span> <span class="o">=</span> <span class="n">generate_box_id</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="c1"># create the box's ID</span>
        <span class="vi">@content</span> <span class="o">=</span> <span class="k">super</span>
      <span class="k">end</span>
      <span class="s2">"&lt;div class=</span><span class="se">\"</span><span class="s2">hide-show-box</span><span class="se">\"</span><span class="s2">&gt;</span><span class="si">#{</span><span class="vi">@content</span><span class="si">}</span><span class="s2">&lt;/div&gt;"</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">HSBtitle</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Tag</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">contain</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
      <span class="k">super</span>
      <span class="vi">@title</span> <span class="o">=</span> <span class="n">contain</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
      <span class="n">boxID</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">"boxID"</span><span class="p">]</span> <span class="c1"># get the box's ID</span>

      <span class="n">output</span> <span class="o">=</span> <span class="o">&lt;&lt;~</span><span class="no">EOS</span><span class="sh">
        &lt;button type="button" markdown="1" class="btn collapsed box-button" data-toggle="collapse" data-target="#</span><span class="si">#{</span><span class="n">boxID</span><span class="si">}</span><span class="sh">"&gt;</span><span class="si">#{</span><span class="vi">@title</span><span class="si">}</span><span class="sh">&lt;/button&gt;
</span><span class="no">      EOS</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">HSBcontent</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Block</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">contain</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
      <span class="k">super</span>
      <span class="vi">@showBox</span> <span class="o">=</span> <span class="n">contain</span><span class="p">.</span><span class="nf">strip</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
      <span class="n">boxID</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">"boxID"</span><span class="p">]</span> <span class="c1"># get the box's ID</span>
      <span class="k">if</span> <span class="vi">@showBox</span> <span class="o">==</span> <span class="s1">'show'</span>
        <span class="n">classShow</span> <span class="o">=</span> <span class="s1">'show'</span>
      <span class="k">else</span>
        <span class="n">classShow</span> <span class="o">=</span> <span class="s1">''</span>
      <span class="k">end</span>
      <span class="n">output</span> <span class="o">=</span> <span class="o">&lt;&lt;~</span><span class="no">EOS</span><span class="sh">
        &lt;div id="</span><span class="si">#{</span><span class="n">boxID</span><span class="si">}</span><span class="sh">" markdown="1" class="collapse multi-collapse box-content </span><span class="si">#{</span><span class="n">classShow</span><span class="si">}</span><span class="sh">"&gt;
          </span><span class="si">#{</span><span class="k">super</span><span class="si">}</span><span class="sh">
        &lt;/div&gt;
</span><span class="no">      EOS</span>

      <span class="n">output</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="p">.</span><span class="nf">register_tag</span><span class="p">(</span><span class="s1">'hsbox'</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">HideShowBox</span><span class="p">)</span>
<span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="p">.</span><span class="nf">register_tag</span><span class="p">(</span><span class="s1">'hstitle'</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">HSBtitle</span><span class="p">)</span>
<span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="p">.</span><span class="nf">register_tag</span><span class="p">(</span><span class="s1">'hscontent'</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">HSBcontent</span><span class="p">)</span>
</code></pre></div></div>

<p><img class="emoji" title=":bulb:" alt=":bulb:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png" height="20" width="20"> Actually, there is a <strong class="tbrown">simpler solution</strong> for this task. We can get</p>

<div class="d-md-flex">
  <div class="language-plaintext flex-even overflow-auto pr-md-1 highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>{% hsbox **Box's title** | show %}
Box's content.
{% endhsbox %}
</code></pre></div>  </div>

  <div class="language-html flex-even overflow-auto pl-md-1 highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"hide-show-box"</span><span class="nt">&gt;</span>
<span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">markdown=</span><span class="s">"1"</span> <span class="na">class=</span><span class="s">"btn collapsed box-button"</span> <span class="na">data-toggle=</span><span class="s">"collapse"</span> <span class="na">data-target=</span><span class="s">"#something"</span><span class="nt">&gt;</span>
<span class="nt">&lt;strong&gt;</span>Box's title<span class="nt">&lt;/strong&gt;</span>
<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"something"</span> <span class="na">markdown=</span><span class="s">"1"</span> <span class="na">class=</span><span class="s">"collapse multi-collapse box-content"</span><span class="nt">&gt;</span>
Box's content.
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>  </div>
</div>

<p>by using</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">Jekyll</span>
  <span class="k">class</span> <span class="nc">HideShowBox</span> <span class="o">&lt;</span> <span class="no">Liquid</span><span class="o">::</span><span class="no">Block</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">contain</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
      <span class="k">super</span>
      <span class="vi">@input</span> <span class="o">=</span> <span class="n">contain</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">generate_box_id</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
      <span class="n">charset</span> <span class="o">=</span> <span class="no">Array</span><span class="p">(</span><span class="s1">'A'</span><span class="o">..</span><span class="s1">'Z'</span><span class="p">)</span> <span class="o">+</span> <span class="no">Array</span><span class="p">(</span><span class="s1">'a'</span><span class="o">..</span><span class="s1">'z'</span><span class="p">)</span>
      <span class="no">Array</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="p">{</span> <span class="n">charset</span><span class="p">.</span><span class="nf">sample</span> <span class="p">}.</span><span class="nf">join</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
      <span class="c1"># Split the input variable (omitting error checking)</span>
      <span class="n">input_split</span> <span class="o">=</span> <span class="n">split_params</span><span class="p">(</span><span class="vi">@input</span><span class="p">)</span>
      <span class="n">title</span> <span class="o">=</span> <span class="n">input_split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="n">boxid</span> <span class="o">=</span> <span class="n">generate_box_id</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
      <span class="k">if</span> <span class="n">input_split</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="kp">nil</span>
        <span class="k">if</span> <span class="n">input_split</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">strip</span> <span class="o">==</span> <span class="s1">'show'</span>
          <span class="n">showbox</span> <span class="o">=</span> <span class="s2">"show"</span>
        <span class="k">else</span>
          <span class="n">showbox</span> <span class="o">=</span> <span class="s2">""</span>
        <span class="k">end</span>
      <span class="k">else</span>
        <span class="n">showbox</span> <span class="o">=</span> <span class="s2">""</span>
      <span class="k">end</span>
      <span class="n">content</span> <span class="o">=</span> <span class="k">super</span>

      <span class="n">output</span> <span class="o">=</span> <span class="o">&lt;&lt;~</span><span class="no">EOS</span><span class="sh">
        &lt;div class="hide-show-box"&gt;
          &lt;button type="button" markdown="1" class="btn collapsed box-button" data-toggle="collapse" data-target="#</span><span class="si">#{</span><span class="n">boxid</span><span class="si">}</span><span class="sh">"&gt;
            </span><span class="si">#{</span><span class="n">title</span><span class="si">}</span><span class="sh">
          &lt;/button&gt;
          &lt;div id="</span><span class="si">#{</span><span class="n">boxid</span><span class="si">}</span><span class="sh">" markdown="1" class="collapse multi-collapse box-content </span><span class="si">#{</span><span class="n">showbox</span><span class="si">}</span><span class="sh">"&gt;
            </span><span class="si">#{</span><span class="n">content</span><span class="si">}</span><span class="sh">
          &lt;/div&gt;
        &lt;/div&gt;
</span><span class="no">      EOS</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">split_params</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
      <span class="n">params</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="s2">"|"</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Liquid</span><span class="o">::</span><span class="no">Template</span><span class="p">.</span><span class="nf">register_tag</span><span class="p">(</span><span class="s1">'hsbox'</span><span class="p">,</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">HideShowBox</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="problem-with-kramdown">Problem with kramdown</h3>

<p>Somtimes, we cannot use <code class="language-plaintext highlighter-rouge">markdown="1"</code> directly in ruby file. For example, below block of code produces a block of codes (<code class="language-plaintext highlighter-rouge">&lt;pre&gt;</code>) instead of a single text,</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span> <span class="n">input</span><span class="p">,</span> <span class="n">liquid_options</span><span class="p">)</span>
  <span class="k">super</span>
  <span class="vi">@title</span> <span class="o">=</span> <span class="n">input</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="n">content</span> <span class="o">=</span> <span class="k">super</span>
  <span class="n">output</span> <span class="o">=</span> <span class="o">&lt;&lt;~</span><span class="no">EOS</span><span class="sh">
    &lt;div class="def-box" id="dn1"&gt;
      &lt;div class="box-title" markdown="1"&gt;
        </span><span class="si">#{</span><span class="vi">@title</span><span class="si">}</span><span class="sh">
      &lt;/div&gt;
      &lt;div class="box-content" markdown="1"&gt;
        </span><span class="si">#{</span><span class="n">content</span><span class="si">}</span><span class="sh">
      &lt;/div&gt;
    &lt;/div&gt;
</span><span class="no">  EOS</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Instead, we change a little bit like this,</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"box-title"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">markdown=</span><span class="s">"span"</span><span class="nt">&gt;</span>#{@title}<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h2 id="run-with-draft">Run with draft</h2>

<p>Inside the root folder, create a folder named <code class="language-plaintext highlighter-rouge">_drafts</code>. You can put your draft posts inside this folder and whenever you wanna show it in your site, use this command,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll serve <span class="nt">--draft</span>
</code></pre></div></div>

<p>In the case you have already build your site (all new posts are rendered to <code class="language-plaintext highlighter-rouge">_site</code>), you only changes some small things in some post and you don’t want jekyll to render again all things on your site (just look at your current post), use this,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll serve <span class="nt">-I</span>
</code></pre></div></div>

<h2 id="serve-in-background">Serve in background</h2>

<div class="flex-50">
  <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c"># start</span>
bundle <span class="nb">exec </span>jekyll serve 2&gt;&amp;1 &amp;
bundle <span class="nb">exec </span>jekyll serve <span class="nt">-I</span> 2&gt;&amp;1 &amp;
</code></pre></div>  </div>

  <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c"># stop</span>
<span class="c"># find jekyll server process</span>
ps <span class="nt">-ef</span> | <span class="nb">grep </span>jekyll
<span class="c"># substitute pid# with process id</span>
<span class="nb">kill</span> <span class="nt">-9</span> pid#
</code></pre></div>  </div>
</div>

<h2 id="using-markdown-syntax-inside-a-html-tagblock">Using markdown syntax inside a HTML tag/block</h2>

<p>For a block, we use <code class="language-plaintext highlighter-rouge">markdown="1"</code>,</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">markdown=</span><span class="s">"1"</span><span class="nt">&gt;</span>paragraph<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>For a tag, we use <code class="language-plaintext highlighter-rouge">markdown="span"</code>,</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mark</span> <span class="na">markdown=</span><span class="s">"span"</span><span class="nt">&gt;</span>text<span class="nt">&lt;/span&gt;</span>
</code></pre></div></div>

<h2 id="add-search-with-lunrjs">Add search with lunrjs</h2>

<p>Download <a href="/js/lunr.min.js">lunr.min.js</a> and <a href="/js/search.js">search.js</a> and put them in <code class="language-plaintext highlighter-rouge">root/js/</code>. The newest version of lunrjs given here but I’m not sur if it works with this technique or not.</p>

<p>Create a file <code class="language-plaintext highlighter-rouge">search.html</code> in the root folder with content:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: page
title: Search on this page
---

<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"p-intro"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"search-process"</span><span class="nt">&gt;</span>{{re_loading}}<span class="nt">&lt;/span&gt;</span> {{re_result}} <span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"search-query-container"</span> <span class="na">style=</span><span class="s">"display: none;"</span><span class="nt">&gt;</span>{{re_forkey}} "<span class="nt">&lt;strong</span> <span class="na">id=</span><span class="s">"search-query"</span><span class="nt">&gt;&lt;/strong&gt;</span>"<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"search-results"</span><span class="nt">&gt;&lt;/ul&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">post</span> <span class="k">in</span> <span class="nx">site</span><span class="p">.</span><span class="nx">posts</span> <span class="o">%</span><span class="p">}</span>
      <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">post</span><span class="p">.</span><span class="nx">title</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="nx">unless</span> <span class="nx">post</span><span class="p">.</span><span class="nx">excluded_in_search</span> <span class="o">%</span><span class="p">}</span>
          <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">added</span> <span class="o">%</span><span class="p">},{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
          <span class="p">{</span><span class="o">%</span> <span class="nx">assign</span> <span class="nx">added</span> <span class="o">=</span> <span class="kc">false</span> <span class="o">%</span><span class="p">}</span>
          <span class="dl">"</span><span class="s2">{{ post.url | slugify }}</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{ post.url | slugify }}</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{ post.title | xml_escape }}</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">categories</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{ post.categories | join: </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> | xml_escape }}</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">tags</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{ post.tags | join: </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> | xml_escape }}</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2"> {{ post.url | xml_escape }}</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">:</span> <span class="p">{{</span> <span class="nx">post</span><span class="p">.</span><span class="nx">content</span> <span class="o">|</span> <span class="nx">strip_html</span> <span class="o">|</span> <span class="na">replace_regex</span><span class="p">:</span> <span class="dl">"</span><span class="s2">[</span><span class="se">\</span><span class="s2">s/</span><span class="se">\n</span><span class="s2">]+</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">|</span> <span class="nx">strip</span> <span class="o">|</span> <span class="nx">jsonify</span> <span class="p">}}</span>
          <span class="p">}</span>
          <span class="p">{</span><span class="o">%</span> <span class="nx">assign</span> <span class="nx">added</span> <span class="o">=</span> <span class="kc">true</span> <span class="o">%</span><span class="p">}</span>
        <span class="p">{</span><span class="o">%</span> <span class="nx">endunless</span> <span class="o">%</span><span class="p">}</span>
      <span class="p">{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
  <span class="p">};</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{{ site.baseurl }}/js/lunr.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"{{ site.baseurl }}/js/search.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>

<p>Note that, you can change some personal settings in the files <code class="language-plaintext highlighter-rouge">search.js</code> and <code class="language-plaintext highlighter-rouge">search.html</code> if you like.</p>

<p><strong>Remark</strong>: if your site has so many posts, you can remove the last line (<code class="language-plaintext highlighter-rouge">"content"....</code>) to ignore the content from the search. You can even add “keywords” (resplace for “content”) and put that “keywords” in the frontmatter, change also the term “content” in <code class="language-plaintext highlighter-rouge">search.js</code> by “keywords”. That’s what I did on this site.</p>


<!-- <div class="box-error">
<h4>Notice an error?</h4>
Everything on this site is <a href="https://github.com/dinhanhthi/dinhanhthi.com" target="_blank">published</a> on Github. If you find something wrong, <a href="https://github.com/dinhanhthi/dinhanhthi.com/edit/master/_posts/web-dev/2019-09-03-jekyll-tips.md" target="_blank">just edit it</a> or <a href="mailto:dinhanhthi@gmail.com?subject=Suggest to edit post 'Jekyll'">tell me</a> about it.
</div> -->

<div class="sec-comment">

  

  <button class="btn btn-info w-100" id="show-comments" onclick="load_comment();return false;">
    If you find something wrong or need a comment, click here.
  </button>

  <div id="comment-box" style="display: none;">
    <script src="https://utteranc.es/client.js" repo="dinhanhthi/dinhanhthi.com" issue-term="pathname" theme="github-light" crossorigin="anonymous" async>
    </script>
  </div>

  <script>
    var comment_loaded = false;
    function load_comment() {
        if (!comment_loaded)  {
            comment_loaded = true;
            document.getElementById("show-comments").style.display = "none";
            document.getElementById("comment-box").style.display = "block";
        }
    }
  </script>
</div>

<div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg modal-xl">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
        <img src="" class="imagepreview" style="width: 100%;">
      </div>
    </div>
  </div>
</div>



          </article>
        </div>
      </div>
    </div>
  </section>
</main>



  <footer class="footer">
    <div class="container">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6 text-center p-3">
      <div class="footer-info">
        <a href="https://dinhanhthi.com" target="_blank">Thi</a>
         © 
        2022
         • 
        <a href="http://localhost:4000/about-the-notes">
          About the notes
        </a>
         • 
        <a href="https://pobo.dinhanhthi.com" target="_blank">
          Po Bo
        </a>
         • 
        <a href="/for-me-only">
          For me only
        </a>
         • 
        <a class="donate" href="http://localhost:4000/donate">
          Support Thi
        </a>
      </div>
    </div>
  </div>
</div>

  </footer>

  





  
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-58921685-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->


  <script src="https://code.jquery.com/jquery-1.10.1.min.js" integrity="sha256-SDf34fFWX/ZnUozXXEH0AeB+Ip3hvRsjLwp6QNTEb3k=" crossorigin="anonymous" async></script>

  <!-- scrolling-toc -->
  <script src="http://localhost:4000/js/scrolling-toc.js" type="text/javascript" async></script>

  <!-- bootstrap -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous" async></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous" async></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous" async></script>

  <script src="http://localhost:4000/js/click_to_zoom.js" async></script>

  <script src="http://localhost:4000/js/anchor.js" async></script>

</body>
</html>
