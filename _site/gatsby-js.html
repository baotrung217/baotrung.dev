<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

	<!-- block search indexing -->
	<meta name="robots" content="noindex">
	<meta name="googlebot" content="noindex">

  <!-- bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" async>

  <!-- fontawesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" async>

  <!-- google fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin async >
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&display=swap" rel="stylesheet" crossorigin async>
  <link href="https://fonts.googleapis.com/css?family=Livvic:400,400i,500,500i,600&display=swap&subset=vietnamese" rel="stylesheet" crossorigin async>
  <link href="https://fonts.googleapis.com/css?family=Lobster&display=swap" rel="stylesheet" crossorigin async>

  <link rel="alternate" hreflang="en" href="/gatsby-js" async />

  <link rel="shortcut icon" type="image/x-icon" href="/img/avatar-icon.ico" async>
  <meta name="author" content="Nguyễn Bảo Trung" />

  <title>
    
      Trung | Gatsby 101
    
  </title>

  

  <!-- feed -->
  <link rel="alternate" type="application/rss+xml" title="Nguyễn Bảo Trung - " href="/feed.xml" async />

  <!-- page (internal) -->
  

  <!-- layout (internal) -->
  
    
      <link rel="stylesheet" href="/css/main.css" async />
    
      <link rel="stylesheet" href="/css/rouge-thi.css" async />
    
  
  

    <!-- Facebook OpenGraph tags -->
  

  
    <meta property="fb:admins" content="baotrung217zzz"/>
  

  
    <meta property="og:title" content="Gatsby 101" />
  

  
    <meta property="og:description" content="Misc Installation on localhost Errors? Components from Gatsby Gatsby structure Understand props Components Apply Bootstrap Learn from Starter theme Using plugins Using CDN from Bootstrap Using sass Differences between layouts and templates Design base layout Design post / page templates Different &amp;lt;Header&amp;gt; for different page types Add Navigation bar Using...">
  


  <meta property="og:type" content="website" />

  
    <meta property="og:url" content="http://localhost:4000/gatsby-js" />
    <link rel="canonical" href="http://localhost:4000/gatsby-js" async />
  

  <meta property="og:image" content="http://localhost:4000/img/background.png" />
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:width" content="1234">
  <meta property="og:image:height" content="592">

  

  

  

  

</head>


<body>
  <script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '',
      xfbml      : true,
      version    : 'v3.1'
    });
  
    FB.AppEvents.logPageView();
  
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>
  <header>
    <nav class="navbar navbar-dark nav-bg navbar-custom fixed-top">
  <div class="container">
    <div class="col-12 col-lg-10 offset-lg-1">
      <div class="nav-container">
        <a class="nav-item" href="http://localhost:4000/">
          <i style="color: #ffeead;" class="fas fa-home" aria-hidden="true"></i>
          <span>Home</span>
        </a>
        <a class="nav-item" href="http://localhost:4000/about">
          <i style="color: #e97c8e;" class="fas fa-fire" aria-hidden="true"></i>
          <span>Me</span>
        </a>
        <a class="nav-item" href="http://localhost:4000/notes">
          <i style="color: #93ceff;" class="fas fa-edit" aria-hidden="true"></i>
          <span>Notes</span>
        </a>
        <div class="nav-search">
          <form action="http://localhost:4000/search" method="get">
            <button class="nav-search-submit" type="submit">
              <i class="fa fa-search" aria-hidden="true"></i>
            </button>
            <input name="q" class="nav-search-input" type="search" placeholder="search notes..." aria-label="search notes...">
          </form>
        </div>
        <a class="nav-item nav-github" href="https://github.com/baotrung217" target="_blank">
          <i class="fab fa-github"></i>
        </a>
    </div>
    </div>
  </div>
</nav>

  </header>

  
  <header class="header">
    <div class="container">
      <div class="row align-items-center justify-content-center">
        <div class="col-md-8 header-content">
          
          
            <div class="icon-photo">
              <img src="http://localhost:4000/img/header/gatsby.png">
            </div>
          
          <h1 class="post-title">
            Gatsby 101
          </h1>
          
            <div class="tag-in-post">
              
              
                
                
                
                
                
                  <a href="/tags#101">
                    101
                  </a>
                

              
                
                
                
                
                
                  <a href="/tags#gatsbyjs">
                    gatsbyjs
                  </a>
                

              
                
                
                
                
                
                  <a href="/tags#installation">
                    installation
                  </a>
                

              
                
                
                
                
                
                  <a href="/tags#react">
                    react
                  </a>
                

              
                
                
                
                
                
                  <a href="/tags#static-site">
                    static site
                  </a>
                

              
            </div>
          
          <p>
            
              16 Dec 2019
                        
          </p>
        </div>
      </div>
    </div>
  </header>


<main role="main">
  <section class="section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-9">
          <article  class="page-content ">
            <p style="font-style: italic; color: #777; font-size: 0.95rem; margin-bottom: 2rem;">
  Last modified on 01 May 2022.
</p>




<div id="toc">
  <div class="toc-content">
<ul id="markdown-toc">
  <li><a href="#misc" id="markdown-toc-misc">Misc</a></li>
  <li><a href="#installation-on-localhost" id="markdown-toc-installation-on-localhost">Installation on localhost</a></li>
  <li><a href="#errors" id="markdown-toc-errors">Errors?</a></li>
  <li><a href="#components-from-gatsby" id="markdown-toc-components-from-gatsby">Components from Gatsby</a></li>
  <li><a href="#gatsby-structure" id="markdown-toc-gatsby-structure">Gatsby structure</a>    <ul>
      <li><a href="#understand-props" id="markdown-toc-understand-props">Understand <code class="language-plaintext highlighter-rouge">props</code></a></li>
      <li><a href="#components" id="markdown-toc-components">Components</a></li>
    </ul>
  </li>
  <li><a href="#apply-bootstrap" id="markdown-toc-apply-bootstrap">Apply Bootstrap</a>    <ul>
      <li><a href="#learn-from-starter-theme" id="markdown-toc-learn-from-starter-theme">Learn from Starter theme</a></li>
      <li><a href="#using-plugins" id="markdown-toc-using-plugins">Using plugins</a></li>
      <li><a href="#using-cdn-from-bootstrap" id="markdown-toc-using-cdn-from-bootstrap">Using CDN from Bootstrap</a></li>
    </ul>
  </li>
  <li><a href="#using-sass" id="markdown-toc-using-sass">Using <code class="language-plaintext highlighter-rouge">sass</code></a></li>
  <li><a href="#differences-between-layouts-and-templates" id="markdown-toc-differences-between-layouts-and-templates">Differences between <code class="language-plaintext highlighter-rouge">layouts</code> and <code class="language-plaintext highlighter-rouge">templates</code></a>    <ul>
      <li><a href="#design-base-layout" id="markdown-toc-design-base-layout">Design <code class="language-plaintext highlighter-rouge">base</code> layout</a></li>
      <li><a href="#design-post--page-templates" id="markdown-toc-design-post--page-templates">Design <code class="language-plaintext highlighter-rouge">post</code> / <code class="language-plaintext highlighter-rouge">page</code> templates</a></li>
      <li><a href="#different-header-for-different-page-types" id="markdown-toc-different-header-for-different-page-types">Different <code class="language-plaintext highlighter-rouge">&lt;Header&gt;</code> for different page types</a></li>
    </ul>
  </li>
  <li><a href="#add-navigation-bar" id="markdown-toc-add-navigation-bar">Add <code class="language-plaintext highlighter-rouge">Navigation</code> bar</a></li>
  <li><a href="#using-font-awesome" id="markdown-toc-using-font-awesome">Using Font Awesome</a></li>
  <li><a href="#google-fonts" id="markdown-toc-google-fonts">Google Fonts</a></li>
  <li><a href="#insert-images--photos" id="markdown-toc-insert-images--photos">Insert images / photos</a></li>
  <li><a href="#adding-markdown-posts" id="markdown-toc-adding-markdown-posts">Adding markdown posts</a></li>
  <li><a href="#display-site--post-info-on-browser-tab" id="markdown-toc-display-site--post-info-on-browser-tab">Display site / post info on browser tab</a></li>
  <li><a href="#create-page-template-and-markdown-file" id="markdown-toc-create-page-template-and-markdown-file">Create page template and markdown file</a></li>
  <li><a href="#render-html-tag-in-a-string" id="markdown-toc-render-html-tag-in-a-string">Render html tag in a string</a></li>
  <li><a href="#jsx-in-markdown" id="markdown-toc-jsx-in-markdown">JSX in Markdown</a></li>
  <li><a href="#create-page-template-and-markdown-file-1" id="markdown-toc-create-page-template-and-markdown-file-1">Create page template and markdown file</a></li>
  <li><a href="#references" id="markdown-toc-references">References</a></li>
</ul>

  </div>
</div>

<p>Jekyll is great but for a note-taking site like this site, it’s slow. I decide to learn about Gatsby to make my note site more faster!</p>

<h2 id="misc">Misc</h2>

<p>👉 If you wanna install some additional plugins/components, remember to add <code class="language-plaintext highlighter-rouge">--save</code> at the end of the installation line. This step is to add to <code class="language-plaintext highlighter-rouge">package.json</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># for example</span>
npm i gatsby-plugin-react-head react-head <span class="nt">--save</span>
</code></pre></div></div>

<p>When you install something new, don’t forget to <code class="language-plaintext highlighter-rouge">cd</code> to the current working directory, e.g. <code class="language-plaintext highlighter-rouge">/gatsby-site</code>.</p>

<p>👉 React / Gatsby use <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a> syntax. It’s an XML/HTML-like syntax used by React that extends ECMAScript so that XML/HTML-like text can co-exist with JavaScript/React code.</p>

<p>👉 Read <a href="https://itnext.io/react-component-class-vs-stateless-component-e3797c7d23ab">this</a> to understand the differences between <strong>Class Component</strong> and <strong>Functional Component</strong> (a.k.a. <strong>stateless</strong>). Below are 2 examples which give the same result.</p>

<div class="d-md-flex">
  <div class="language-jsx flex-even overflow-auto pr-md-1 highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Class Component</span>
<span class="kd">class</span> <span class="nx">MyComponentClass</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="si">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>  </div>

  <div class="language-jsx flex-even overflow-auto pl-md-1 highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Functional Component</span>
<span class="kd">const</span> <span class="nx">MyStatelessComponent</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
<span class="c1">// without JSX</span>
<span class="kd">const</span> <span class="nx">MyStatelessComponent</span> <span class="o">=</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
</code></pre></div>  </div>
</div>

<ul>
  <li><strong>Functional Component</strong> (stateless component): just a plain javascript function which takes props as an argument and returns a react element. You can’t reach <code class="language-plaintext highlighter-rouge">this.state</code> inside it.</li>
  <li><strong>Component class</strong>: has a state, lifecycle <a href="https://reactjs.org/docs/react-component.html">hooks</a> and it is a javascript class.</li>
</ul>

<p>The rule would be: if your component needs some data which cannot be passed as a prop use class component to get that data. If you need to keep UI state in your component(expandable blocks) so it’s a good place to keep that info in a components state.</p>

<h2 id="installation-on-localhost">Installation on localhost</h2>

<p>Install <a href="https://www.npmjs.com/">npm</a> and <a href="https://nodejs.org/en/">NodeJS (with npm)</a>. Check the current version: <code class="language-plaintext highlighter-rouge">npm -v</code> (for npm) and <code class="language-plaintext highlighter-rouge">node -v</code> (for nodejs). After that, you can install Gatsby,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># install</span>
npm <span class="nb">install</span> <span class="nt">--global</span> gatsby-cli
<span class="c"># check version</span>
gatsby <span class="nt">-v</span>
<span class="c"># update</span>
npm i <span class="nt">-g</span> gatsby-cli
</code></pre></div></div>

<div class="hide-show-box">
<button type="button" class="btn collapsed box-button" data-toggle="collapse" data-target="#box1ct">
If error <code class="language-plaintext highlighter-rouge">EACCES</code> occurs (fix on Linux)
</button>
<div id="box1ct" class="collapse multi-collapse box-content">

    <ul class="pl-3">
      <li>Create a new folder by: <code class="language-plaintext highlighter-rouge">mkdir ~/.npm-global</code></li>
      <li>Open <code class="language-plaintext highlighter-rouge">~/.profile</code></li>
      <li>
        <p>Add following lines to this file</p>

        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm config <span class="nb">set </span>prefix <span class="s1">'~/.npm-global'</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>~/.npm-global/bin:<span class="nv">$PATH</span>
</code></pre></div>        </div>
      </li>
      <li>Save the file and then run (if you don’t restart the computer, do the same below work for new tab of terminal): <code class="language-plaintext highlighter-rouge">source ~/.profile</code>.</li>
    </ul>
  </div>
</div>

<p>Install new site with</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gatsby new gatsby-site <span class="c"># create a new site with name 'gatsby-site'</span>
<span class="nb">cd </span>gatsby-site
gatsby develop <span class="c"># run the site at http://localhost:8000</span>
</code></pre></div></div>

<p>You can view <strong>GraphiQL</strong>, an in-browser IDE, to explore your site’s data and schema,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://localhost:8000/___graphql
</code></pre></div></div>

<div class="hide-show-box">
  <button type="button" class="btn collapsed box-button" data-toggle="collapse" data-target="#WQCFVCpvHWGyCbLwfvdn">
    How to use <code class="language-plaintext highlighter-rouge">___graphql</code>? 
  </button>
  <div id="WQCFVCpvHWGyCbLwfvdn" class="collapse multi-collapse box-content ">
    <div>
      <p>Suppose that in <code class="language-plaintext highlighter-rouge">ListAccount.js</code>,</p>

      <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="nx">props</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nc">StaticQuery</span>
    <span class="na">query</span><span class="p">=</span><span class="si">{</span><span class="nx">graphql</span><span class="s2">`
      query AccountItemsQuery {
        allAccountItemsJson{
          edges{
            node{
              name
              icon{
                childImageSharp {
                  fixed(width: 150, height: 150) {
                    ...GatsbyImageSharpFixed_tracedSVG
                  }
                }
              }
              url
              opacity
              title
            }
          }
        }
      }
    `</span><span class="si">}</span>
    <span class="na">render</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="p">&lt;</span><span class="nc">ListSocial</span> <span class="na">accounts</span><span class="p">=</span><span class="si">{</span><span class="nx">data</span><span class="si">}</span> <span class="si">{</span><span class="p">...</span><span class="nx">props</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>
  <span class="p">/&gt;</span>
<span class="p">)</span>
</code></pre></div>      </div>

      <p>In <a href="http://localhost:8000/___graphql">http://localhost:8000/___graphql</a>,</p>

      <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">query</span> <span class="nx">AccountItemsQuery</span> <span class="p">{</span>
  <span class="nx">allAccountItemsJson</span> <span class="p">{</span>
    <span class="nx">edges</span> <span class="p">{</span>
      <span class="nx">node</span> <span class="p">{</span>
        <span class="nx">name</span>
        <span class="nx">icon</span> <span class="p">{</span>
          <span class="nx">childImageSharp</span> <span class="p">{</span>
            <span class="nx">fixed</span><span class="p">(</span><span class="nx">width</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="nx">height</span><span class="p">:</span> <span class="mi">150</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">tracedSVG</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">url</span>
        <span class="nx">opacity</span>
        <span class="nx">title</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>      </div>

      <p>and then click on <strong>Run</strong> icon to see the result!</p>
    </div>
  </div>
</div>

<h2 id="errors">Errors?</h2>

<p>👉 Requires…</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># bootstrap@4.4.1 requires a peer of jquery@1.9.1</span>
npm i jquery@1.9.1 <span class="nt">--save</span>

<span class="c"># tsutils@3.17.1 requires a peer of typescript@&gt;=2.8.0</span>
npm i typescript <span class="nt">--save</span>
</code></pre></div></div>

<p>👉 Cannot read property…</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># TypeError: Cannot read property 'fileName' of undefined</span>
</code></pre></div></div>

<p>Above error comes from inserting images using query. To overcome this, we have to use <a href="https://www.gatsbyjs.org/docs/static-query/"><code class="language-plaintext highlighter-rouge">StaticQuery</code></a> which is introduced in Gatsby v2 (I don’t know why it works!?) 👉 The reason is that the (old) page query can only be added to page components (in my try, I add in <code class="language-plaintext highlighter-rouge">Header.js</code> component). <code class="language-plaintext highlighter-rouge">StaticQuery</code> can be used as a replacement of page query, it can be added to any component.<sup><a href="https://www.gatsbyjs.org/docs/static-query/#how-staticquery-differs-from-page-query " target="_blank">[ref]</a></sup></p>

<p>👉 Fail to build on Netlify <code class="language-plaintext highlighter-rouge">Build script returned non-zero exit code: 127</code>,</p>

<ul>
  <li>Delete <code class="language-plaintext highlighter-rouge">package-lock.json</code>, don’t include it and <code class="language-plaintext highlighter-rouge">node_modules</code> on git.</li>
  <li>Remove either <code class="language-plaintext highlighter-rouge">package.json</code> or <code class="language-plaintext highlighter-rouge">yarn.lock</code> on Github (remove yarn).</li>
  <li><code class="language-plaintext highlighter-rouge">"version": "0.1",</code> is wrong, changing to <code class="language-plaintext highlighter-rouge">"1.0.1"</code> is OK.</li>
  <li>Try to debug with <a href="https://www.netlify.com/products/dev/#how-it-works">netlify on localhost</a>.
    <ul>
      <li>After installing, <code class="language-plaintext highlighter-rouge">cd</code> to <code class="language-plaintext highlighter-rouge">gatsby-site</code> and then run <code class="language-plaintext highlighter-rouge">netlify dev</code>.</li>
      <li>Read <a href="https://www.netlify.com/blog/2019/05/28/deploy-in-seconds-with-netlify-cli/">more</a> and <a href="https://scotch.io/tutorials/netlify-dev-the-power-of-netlify-on-your-local-computer">more</a>.</li>
    </ul>
  </li>
</ul>

<p>👉 Fail to build on Netlify <code class="language-plaintext highlighter-rouge">Can't resolve '../components/Header' in '/opt/build/repo/src/components'</code> for examples. 👉 The problem comes from the original name of file <code class="language-plaintext highlighter-rouge">Header.js</code> is <code class="language-plaintext highlighter-rouge">header.js</code>. I renamed it to <code class="language-plaintext highlighter-rouge">Header.js</code> but it’s still actually <code class="language-plaintext highlighter-rouge">header.js</code> (check the Github Desktop to see). You can change is to <code class="language-plaintext highlighter-rouge">HeaderNew.js</code> to fix the problem!</p>

<p>👉 If you wanna use adjacent react components, you have to put them inside <code class="language-plaintext highlighter-rouge">&lt;&gt;..&lt;/&gt;</code> (<a href="https://reactjs.org/docs/fragments.html">React fragment</a>) like below example,</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;&gt;</span>
      <span class="p">&lt;</span><span class="nc">Navigation</span><span class="p">&gt;&lt;/</span><span class="nc">Navigation</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">Header</span> <span class="na">type</span><span class="p">=</span><span class="si">{</span><span class="nx">headerType</span><span class="si">}</span> <span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>Thi<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/&gt;</span>
  <span class="p">)</span>
</code></pre></div></div>

<p>This allows you to return multiple child components without appending additional nodes to the DOM.</p>

<p>👉 <code class="language-plaintext highlighter-rouge">Warning: Each child in a list should have a unique "key" prop.</code> You have to make sure that each child of a list in react component has a unique key. For example</p>

<div class="flex-auto-equal-2">

  <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// error</span>
<span class="p">{</span><span class="nx">links</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">link</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;&gt;</span>
    <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">link</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&gt;</span> <span class="nx">Thi</span> <span class="o">&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">Link</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">link</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&gt;</span> <span class="p">{</span><span class="nx">link</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span> <span class="o">&lt;</span><span class="sr">/Link</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span><span class="p">))}</span>
</code></pre></div>  </div>

  <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// but this</span>
<span class="p">{</span><span class="nx">links</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">link</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">link</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">span</span><span class="o">&gt;</span> <span class="nx">Thi</span> <span class="o">&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">Link</span><span class="o">&gt;</span> <span class="p">{</span><span class="nx">link</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span> <span class="o">&lt;</span><span class="sr">/Link</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/</span><span class="err">&gt;
</span><span class="p">))}</span>
</code></pre></div>  </div>

</div>

<h2 id="components-from-gatsby">Components from Gatsby</h2>

<p>👉 <a href="https://www.gatsbyjs.org/docs/gatsby-link/"><code class="language-plaintext highlighter-rouge">Link</code></a> (replaces <code class="language-plaintext highlighter-rouge">&lt;a&gt;</code> tag for <strong>internal links</strong>). For external links, use <code class="language-plaintext highlighter-rouge">&lt;a&gt;&lt;/a&gt;</code> as usual.</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Link</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">gatsby</span><span class="dl">'</span>
<span class="o">&lt;</span><span class="nx">Link</span> <span class="nx">to</span><span class="o">=</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Text</span><span class="o">&lt;</span><span class="nx">Link</span><span class="o">/&gt;</span> <span class="c1">// only used for internal links</span>
</code></pre></div></div>

<p>You cannot use <code class="language-plaintext highlighter-rouge">target='_blank'</code> with <code class="language-plaintext highlighter-rouge">&lt;Link&gt;</code> because whenever you use internal links, they are always in the same window!</p>

<p>👉 Use <code class="language-plaintext highlighter-rouge">className</code> instead of <code class="language-plaintext highlighter-rouge">class=</code>. E.g. <code class="language-plaintext highlighter-rouge">className = "abc"</code> or <code class="language-plaintext highlighter-rouge">className = "abc xyz"</code>.</p>

<p>👉 Inline CSS, <code class="language-plaintext highlighter-rouge">&lt;div style={{ color: "#ffff", paddingTop: "10px" }}&gt;&lt;/div&gt;</code>.</p>

<p>👉 Date in Gatsby: <code class="language-plaintext highlighter-rouge">{new Date().getFullYear()}</code> or using <a href="https://momentjs.com/docs/#/displaying/"><code class="language-plaintext highlighter-rouge">moment.js</code></a>.</p>

<h2 id="gatsby-structure">Gatsby structure</h2>

<ul>
  <li><a href="https://www.gatsbyjs.org/docs/recipes/">Recipes</a> – a cookbook on how to build things, Gatsby style.</li>
  <li><a href="https://www.gatsbyjs.org/docs/gatsby-project-structure/">Gatsby Project Structure</a> – a tour of all the common folders and files.</li>
  <li><a href="https://www.gatsbyjs.org/docs/building-with-components/">Building with Components</a>.</li>
  <li><a href="https://www.gatsbyjs.org/docs/layout-components/">Layout Components</a></li>
</ul>

<h3 id="understand-props">Understand <code class="language-plaintext highlighter-rouge">props</code></h3>

<p>When React sees an element representing a user-defined component, it passes JSX attributes to this component as a single object. We call this object “props” (properties).<sup><a href="https://reactjs.org/docs/components-and-props.html " target="_blank">[ref]</a></sup></p>

<h3 id="components">Components</h3>

<p>A page is basically,</p>

<div class="d-md-flex">
  <div class="language-jsx flex-even overflow-auto pr-md-1 highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span>
<span class="kd">function</span> <span class="nx">AboutPage</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="s">"about-container"</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>About me.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">AboutPage</span>
</code></pre></div>  </div>

  <div class="language-jsx flex-even overflow-auto pl-md-1 highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="c1">// ...</span>
  <span class="p">)</span>
<span class="p">}</span>

<span class="c1">// or</span>
<span class="kd">const</span> <span class="nx">AboutPage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="c1">// ...</span>
<span class="p">)</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">AboutPage</span>
</code></pre></div>  </div>
</div>

<h2 id="apply-bootstrap">Apply Bootstrap</h2>

<h3 id="learn-from-starter-theme">Learn from Starter theme</h3>

<p>💡 You can install a <a href="https://github.com/jaxx2104/gatsby-starter-bootstrap">Gatsby Bootstrap Starter</a>,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gatsby new gatstrap https://github.com/jaxx2104/gatsby-starter-bootstrap
</code></pre></div></div>

<h3 id="using-plugins">Using plugins</h3>

<p>❓ What if you wanna start from the beginning? 👉 Install <code class="language-plaintext highlighter-rouge">react-bootstrap</code> and <code class="language-plaintext highlighter-rouge">bootstrap</code>,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>react-bootstrap bootstrap <span class="nt">--save</span>
<span class="c"># --save to save to package.json</span>
</code></pre></div></div>

<p>Import below line in <code class="language-plaintext highlighter-rouge">/gatsby-browser.js</code>,</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="dl">'</span><span class="s1">bootstrap/dist/css/bootstrap.min.css</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="using-cdn-from-bootstrap">Using CDN from Bootstrap</h3>

<p>❓ If you wanna use <a href="https://getbootstrap.com/docs/4.4/getting-started/introduction/#quick-start">CDN</a>? 👉 Put below line in <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> by using <a href="https://www.gatsbyjs.org/packages/gatsby-plugin-react-helmet/">React Helmet</a>,</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">&lt;</span><span class="nc">Helmet</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="p">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="p">=</span><span class="s">".../bootstrap.min.css"</span> <span class="na">integrity</span><span class="p">=</span><span class="s">"..."</span> <span class="na">crossOrigin</span><span class="p">=</span><span class="s">"anonymous"</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="p">=</span><span class="s">".../jquery-3.4.1.slim.min.js"</span> <span class="na">integrity</span><span class="p">=</span><span class="s">"..."</span> <span class="na">crossOrigin</span><span class="p">=</span><span class="s">"anonymous"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="p">=</span><span class="s">".../popper.min.js"</span> <span class="na">integrity</span><span class="p">=</span><span class="s">"..."</span> <span class="na">crossOrigin</span><span class="p">=</span><span class="s">"anonymous"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="p">=</span><span class="s">".../bootstrap.min.js"</span> <span class="na">integrity</span><span class="p">=</span><span class="s">"..."</span> <span class="na">crossOrigin</span><span class="p">=</span><span class="s">"anonymous"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nc">Helmet</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>You can put above codes directly in your <code class="language-plaintext highlighter-rouge">layout.js</code> or <code class="language-plaintext highlighter-rouge">index.js</code>. All the <code class="language-plaintext highlighter-rouge">&lt;link&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> tags will be included in the <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code>. For example in the file <code class="language-plaintext highlighter-rouge">src/pages/index.js</code>,</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/pages/index.js</span>
<span class="k">import</span> <span class="nx">Layout</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../layouts/layout</span><span class="dl">"</span>
<span class="k">import</span> <span class="nx">Helmet</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react-helmet</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">IndexPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nc">Layout</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nc">Helmet</span><span class="p">&gt;</span>
      // the codes
    <span class="p">&lt;/</span><span class="nc">Helmet</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hi people<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Welcome to your new Gatsby site.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    // other codes...
  <span class="p">&lt;/</span><span class="nc">Layout</span><span class="p">&gt;</span>
<span class="p">)</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">IndexPage</span>
</code></pre></div></div>

<p>❓ If you wanna put <code class="language-plaintext highlighter-rouge">bootstrap.js</code> in the <code class="language-plaintext highlighter-rouge">footer</code>? 👉 You can read <a href="https://uxworks.online/how-to-add-a-script-in-head-or-body-tag-in-your-gatsby-website/">this tutorial</a> to add <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> / <code class="language-plaintext highlighter-rouge">&lt;link&gt;</code> tags in <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code>, start or end of <code class="language-plaintext highlighter-rouge">&lt;body&gt;</code> tag. For example, in order to put above scripts/links before <code class="language-plaintext highlighter-rouge">&lt;/body&gt;</code>, paste below code in <code class="language-plaintext highlighter-rouge">/gatsby-ssr.js</code>,</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// file /gatsby-ssr.js</span>
<span class="kd">const</span> <span class="nx">React</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">)</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">onRenderBody</span> <span class="o">=</span> <span class="p">({</span>
  <span class="nx">setHeadComponents</span><span class="p">,</span>
  <span class="nx">setPostBodyComponents</span><span class="p">,</span>
<span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">setHeadComponents</span><span class="p">([</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">key</span><span class="p">=</span><span class="s">'bootstrap-css'</span> <span class="na">rel</span><span class="p">=</span><span class="s">"stylesheet"</span> <span class="na">href</span><span class="p">=</span><span class="s">".../bootstrap.min.css"</span> <span class="na">integrity</span><span class="p">=</span><span class="s">"..."</span> <span class="na">crossOrigin</span><span class="p">=</span><span class="s">"anonymous"</span> <span class="p">/&gt;,</span>
  <span class="p">])</span>
  <span class="nx">setPostBodyComponents</span><span class="p">([</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">key</span><span class="p">=</span><span class="s">"jquery-3-4-1"</span> <span class="na">type</span><span class="p">=</span><span class="s">"text/javascript"</span> <span class="na">src</span><span class="p">=</span><span class="s">".../jquery-3.4.1.slim.min.js"</span> <span class="na">integrity</span><span class="p">=</span><span class="s">"..."</span> <span class="na">crossOrigin</span><span class="p">=</span><span class="s">"anonymous"</span> <span class="p">/&gt;,</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">key</span><span class="p">=</span><span class="s">"proper-1-16"</span> <span class="na">type</span><span class="p">=</span><span class="s">"text/javascript"</span> <span class="na">src</span><span class="p">=</span><span class="s">".../popper.min.js"</span> <span class="na">integrity</span><span class="p">=</span><span class="s">"..."</span> <span class="na">crossOrigin</span><span class="p">=</span><span class="s">"anonymous"</span> <span class="p">/&gt;,</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">key</span><span class="p">=</span><span class="s">"bootstrap-js"</span> <span class="na">type</span><span class="p">=</span><span class="s">"text/javascript"</span> <span class="na">src</span><span class="p">=</span><span class="s">".../bootstrap.min.js"</span> <span class="na">integrity</span><span class="p">=</span><span class="s">"..."</span> <span class="na">crossOrigin</span><span class="p">=</span><span class="s">"anonymous"</span> <span class="p">/&gt;,</span>
  <span class="p">])</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Remember to restart gatsby (<kbd>Ctrl</kbd> + <kbd>C</kbd> to stop and run <code class="language-plaintext highlighter-rouge">gatsby develop</code> to start again).</p>

<h2 id="using-sass">Using <code class="language-plaintext highlighter-rouge">sass</code></h2>

<div class="flex-auto-equal-2">
  <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in /scr/pages/index.js</span>
<span class="k">import</span> <span class="nx">Layout</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../layouts/layout</span><span class="dl">"</span>
</code></pre></div>  </div>

  <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in /scr/layouts/layout.js</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">../styles/main.scss</span><span class="dl">"</span>
</code></pre></div>  </div>

  <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in /scr/styles/main.scss</span>
<span class="p">@</span><span class="nd">import</span> <span class="dl">"</span><span class="s2">layout</span><span class="dl">"</span><span class="p">;</span>
</code></pre></div>  </div>

  <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in /scr/styles/_layout.scss</span>
<span class="c1">// scss codes</span>
</code></pre></div>  </div>
</div>

<h2 id="differences-between-layouts-and-templates">Differences between <code class="language-plaintext highlighter-rouge">layouts</code> and <code class="language-plaintext highlighter-rouge">templates</code></h2>

<p>There are 2 separated folders <code class="language-plaintext highlighter-rouge">/src/layouts</code> and <code class="language-plaintext highlighter-rouge">/src/templates</code>.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">layouts</code>: components are for everything shared across pages e.g. headers, footers, sidebars, etc.</li>
  <li><code class="language-plaintext highlighter-rouge">templates</code>: components are for page types e.g. blog posts, documentation pages, etc.</li>
</ul>

<h3 id="design-base-layout">Design <code class="language-plaintext highlighter-rouge">base</code> layout</h3>

<p>What I need in the base layout:</p>

<ul>
  <li>A fixed navigation bar on top.</li>
  <li>A fixed footer on bottom.</li>
  <li>A flexible header.</li>
  <li>A body wraper.</li>
</ul>

<h3 id="design-post--page-templates">Design <code class="language-plaintext highlighter-rouge">post</code> / <code class="language-plaintext highlighter-rouge">page</code> templates</h3>

<p>Their differences are just the width of the container.</p>

<h3 id="different-header-for-different-page-types">Different <code class="language-plaintext highlighter-rouge">&lt;Header&gt;</code> for different page types</h3>

<div class="d-md-flex">
  <div class="language-jsx flex-even overflow-auto pr-md-1 highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/components/Header.js</span>
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Header</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">headerType</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">type</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">headerType</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="dl">'</span><span class="s1">index</span><span class="dl">'</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
          <span class="p">&lt;&gt;</span>
            <span class="p">&lt;</span><span class="nt">header</span> <span class="na">className</span><span class="p">=</span><span class="s">"idx-header header"</span><span class="p">&gt;</span>
              ...
            <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
          <span class="p">&lt;/&gt;</span>
        <span class="p">)</span>
      <span class="k">default</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span>
          <span class="p">&lt;&gt;</span>
            <span class="p">&lt;</span><span class="nt">header</span> <span class="na">className</span><span class="p">=</span><span class="s">"header"</span><span class="p">&gt;</span>
              ...
            <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
          <span class="p">&lt;/&gt;</span>
        <span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>  </div>

  <div class="flex-even overflow-auto pl-md-1">
    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/layouts/base.js</span>
<span class="k">import</span> <span class="nx">Header</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../components/Header</span><span class="dl">"</span>
<span class="kd">const</span> <span class="nx">Layout</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">headerType</span><span class="o">=</span><span class="dl">'</span><span class="s1">page</span><span class="dl">'</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="p">&lt;&gt;</span>
      <span class="p">&lt;</span><span class="nc">Header</span> <span class="na">type</span><span class="p">=</span><span class="s">'index'</span> <span class="p">/&gt;</span>
      <span class="si">{</span><span class="nx">children</span><span class="si">}</span>
    <span class="p">&lt;/&gt;</span>
  <span class="p">)</span>
<span class="p">}</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">Layout</span>
</code></pre></div>    </div>

    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in src/pages/index.js</span>
<span class="k">import</span> <span class="nx">Layout</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../layouts/base</span><span class="dl">"</span>
<span class="kd">const</span> <span class="nx">IndexPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nc">Layout</span> <span class="na">headerType</span><span class="p">=</span><span class="s">'index'</span><span class="p">&gt;</span>
    ...
  <span class="p">&lt;/</span><span class="nc">Layout</span><span class="p">&gt;</span>
<span class="p">)</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">IndexPage</span>
</code></pre></div>    </div>
  </div>
</div>

<h2 id="add-navigation-bar">Add <code class="language-plaintext highlighter-rouge">Navigation</code> bar</h2>

<p>Using <a href="https://react-bootstrap.netlify.com/"><code class="language-plaintext highlighter-rouge">react-bootstrap</code></a>, create a file <code class="language-plaintext highlighter-rouge">src/components/Navigation.js</code> whose content is,</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">Navbar</span><span class="p">,</span> <span class="nx">Nav</span><span class="p">,</span> <span class="nx">NavDropdown</span><span class="p">,</span> <span class="nx">Form</span><span class="p">,</span> <span class="nx">FormControl</span><span class="p">,</span> <span class="nx">Button</span><span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-bootstrap</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="c1">// the codes from https://react-bootstrap.netlify.com/components/navbar/#navbars</span>
<span class="p">)</span>
</code></pre></div></div>

<p>Then, in <code class="language-plaintext highlighter-rouge">/src/Header.js</code>,</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Navigation</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../components/Navigation</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">Header</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">header</span> <span class="err">..</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nc">Navigation</span><span class="p">&gt;&lt;/</span><span class="nc">Navigation</span><span class="p">&gt;</span>
    // other codes
  <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
<span class="p">)</span>
</code></pre></div></div>

<p>If you get stuck, check <a href="https://www.youtube.com/watch?v=fLCiSSu6-sI">this video</a>.</p>

<h2 id="using-font-awesome">Using <a href="https://fontawesome.com/">Font Awesome</a></h2>

<p>Install (the free things) (if you have a pro license, <a href="https://scotch.io/tutorials/using-font-awesome-5-with-react">read this</a>) or <a href="https://brockduncan.com/using-fontawesome-with-gatsby-and-react/">this</a>,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm i <span class="nt">--save</span> @fortawesome/fontawesome-svg-core @fortawesome/react-fontawesome @fortawesome/free-regular-svg-icons @fortawesome/free-solid-svg-icons @fortawesome/free-brands-svg-icons
</code></pre></div></div>

<p>To <em>import everything in one place</em> instead of importing each icon into each separate file, we’ll create a Font Awesome library. Creat <code class="language-plaintext highlighter-rouge">src/components/fontawesome.js</code></p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// import the library</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">library</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@fortawesome/fontawesome-svg-core</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// import your icons</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">faHome</span><span class="p">,</span> <span class="nx">faFire</span><span class="p">,</span> <span class="nx">faEdit</span><span class="p">,</span>  <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@fortawesome/free-solid-svg-icons</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">library</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span>
  <span class="nx">faHome</span><span class="p">,</span> <span class="nx">faFire</span><span class="p">,</span> <span class="nx">faEdit</span><span class="p">,</span>
<span class="p">);</span>
</code></pre></div></div>

<p>Note that, an icon <code class="language-plaintext highlighter-rouge">fas fa-money-bill</code> will have name <code class="language-plaintext highlighter-rouge">faMoneyBill</code> from <code class="language-plaintext highlighter-rouge">free-solid-svg-icons</code>. In the case you wanna import an entire package,</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">library</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@fortawesome/fontawesome-svg-core</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">fab</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@fortawesome/free-brands-svg-icons</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">library</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">fab</span><span class="p">);</span>
</code></pre></div></div>

<p>In <code class="language-plaintext highlighter-rouge">src/pages/index.js</code> (for example),</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="dl">'</span><span class="s1">../components/fontawesome</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FontAwesomeIcon</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@fortawesome/react-fontawesome</span><span class="dl">'</span>

<span class="o">&lt;</span><span class="nx">FontAwesomeIcon</span> <span class="nx">icon</span><span class="o">=</span><span class="p">{</span><span class="dl">'</span><span class="s1">home</span><span class="dl">'</span><span class="p">}</span> <span class="sr">/&gt; /</span><span class="o">/</span> <span class="k">for</span> <span class="dl">'</span><span class="s1">faHome</span><span class="dl">'</span> <span class="nx">or</span> <span class="dl">'</span><span class="s1">fas fa-home</span><span class="dl">'</span>
<span class="o">&lt;</span><span class="nx">FontAwesomeIcon</span> <span class="nx">icon</span><span class="o">=</span><span class="p">{[</span><span class="dl">'</span><span class="s1">fab</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">github</span><span class="dl">'</span><span class="p">]}</span> <span class="sr">/&gt; /</span><span class="o">/</span> <span class="k">for</span> <span class="dl">'</span><span class="s1">faGithub</span><span class="dl">'</span> <span class="nx">or</span> <span class="s2">`fab fa-github`</span>
</code></pre></div></div>

<p>💡 Yes! <code class="language-plaintext highlighter-rouge">fortawesome</code> is correct!!!</p>

<p>💡 If you have a problem in that the icon is firstly flashing big and then smaller, you need to set the <a href="https://fontawesome.com/how-to-use/with-the-api/setup/configuration">configuration</a> <code class="language-plaintext highlighter-rouge">autoAddCss</code> to <code class="language-plaintext highlighter-rouge">false</code>,<sup><a href="https://medium.com/@fabianterh/fixing-flashing-huge-font-awesome-icons-on-a-gatsby-static-site-787e1cfb3a18" target="_blank">[ref]</a></sup></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">config</span>  <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@fortawesome/fontawesome-svg-core</span><span class="dl">'</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">@fortawesome/fontawesome-svg-core/styles.css</span><span class="dl">"</span>
<span class="nx">config</span><span class="p">.</span><span class="nx">autoAddCss</span> <span class="o">=</span> <span class="kc">false</span>
</code></pre></div></div>

<h2 id="google-fonts">Google Fonts</h2>

<p>Using <code class="language-plaintext highlighter-rouge">typeface.js</code> (search font in <a href="https://www.npmjs.com/package/typeface-open-sans">npmjs</a>),</p>

<div class="d-md-flex">
  <div class="language-bash flex-even overflow-auto pr-md-1 highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># install</span>
npm <span class="nb">install</span> <span class="nt">--save</span> typeface-open-sans
</code></pre></div>  </div>

  <div class="language-js flex-even overflow-auto pl-md-1 highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span> <span class="k">in</span> <span class="nx">gatsby</span><span class="o">-</span><span class="nx">browser</span><span class="p">.</span><span class="nx">js</span>
<span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">typeface-open-sans</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div>  </div>
</div>

<p>Rebuild to see the result!</p>

<p>Below is the old method (it didn’t work well, it doesn’t contain font-weight 600 for Open Sans without reason).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save</span> gatsby-plugin-prefetch-google-fonts
</code></pre></div></div>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in /gatsby-config.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
 <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">resolve</span><span class="p">:</span> <span class="s2">`gatsby-plugin-prefetch-google-fonts`</span><span class="p">,</span>
      <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">fonts</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="na">family</span><span class="p">:</span> <span class="s2">`Roboto Mono`</span><span class="p">,</span>
            <span class="na">variants</span><span class="p">:</span> <span class="p">[</span><span class="s2">`400`</span><span class="p">,</span> <span class="s2">`700`</span><span class="p">]</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="na">family</span><span class="p">:</span> <span class="s2">`Roboto`</span><span class="p">,</span>
            <span class="na">subsets</span><span class="p">:</span> <span class="p">[</span><span class="s2">`latin`</span><span class="p">]</span>
          <span class="p">},</span>
        <span class="p">],</span>
      <span class="p">},</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="insert-images--photos">Insert images / photos</h2>

<p>Read <a href="/gatsby-images">this note</a>.</p>

<h2 id="adding-markdown-posts">Adding markdown posts</h2>

<p>Posts (<code class="language-plaintext highlighter-rouge">.md</code> files) are stored in <code class="language-plaintext highlighter-rouge">/content/posts/</code>. Install <code class="language-plaintext highlighter-rouge">gatsby-transformer-remark</code>,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save</span> gatsby-transformer-remark
</code></pre></div></div>

<p>And add the following to <code class="language-plaintext highlighter-rouge">gatsby-config.js</code> (),</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">plugins</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="na">resolve</span><span class="p">:</span> <span class="s2">`gatsby-source-filesystem`</span><span class="p">,</span>
    <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="s2">`posts`</span><span class="p">,</span>
      <span class="na">path</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">__dirname</span><span class="p">}</span><span class="s2">/content/posts`</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="s2">`gatsby-transformer-remark`</span><span class="p">,</span>
  <span class="c1">// there may be already others like this</span>
  <span class="p">{</span>
    <span class="na">resolve</span><span class="p">:</span> <span class="s2">`gatsby-source-filesystem`</span><span class="p">,</span>
    <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="s2">`images`</span><span class="p">,</span>
      <span class="na">path</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">__dirname</span><span class="p">}</span><span class="s2">/src/images`</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">]</span>
</code></pre></div></div>

<p>Create a file called <code class="language-plaintext highlighter-rouge">post-1.md</code> in <code class="language-plaintext highlighter-rouge">content/posts/</code>,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
path: "/first-post"
date: "2019-05-04"
title: "My first blog post"
---
</code></pre></div></div>

<p>…read <a href="https://www.gatsbyjs.org/docs/adding-markdown-pages/">this</a> and <a href="https://github.com/gatsbyjs/gatsby/tree/master/examples/recipe-sourcing-markdown">this example</a> for more…</p>

<h2 id="display-site--post-info-on-browser-tab">Display site / post info on browser tab</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Layout</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../layouts/base</span><span class="dl">"</span>
<span class="k">import</span> <span class="nx">Helmet</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-helmet</span><span class="dl">'</span>
<span class="kd">const</span> <span class="nx">IndexPage</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span>
  <span class="o">&lt;</span><span class="nx">Layout</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">Helmet</span> <span class="nx">title</span><span class="o">=</span><span class="p">{</span><span class="s2">`Thi | I failed my way to success`</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/Layout</span><span class="err">&gt;
</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="create-page-template-and-markdown-file">Create page template and markdown file</h2>

<p>Read <a href="/gatsby-markdown">this note</a>.</p>

<h2 id="render-html-tag-in-a-string">Render html tag in a string</h2>

<p>Instead of <code class="language-plaintext highlighter-rouge">&lt;p dangerouslySetInnerHTML={{ headerIntro }} /&gt;</code>, you can use <code class="language-plaintext highlighter-rouge">&lt;p dangerouslySetInnerHTML={{__html: headerIntro }} /&gt;</code>. If there is a html tag in <code class="language-plaintext highlighter-rouge">headerIntro</code>, e.g. <code class="language-plaintext highlighter-rouge">"&lt;i&gt;Hello&lt;/i&gt;"</code> will be rendered as <em>Hello</em>.</p>

<h2 id="jsx-in-markdown">JSX in Markdown</h2>

<ul>
  <li>Download and use <a href="https://www.gatsbyjs.org/packages/gatsby-plugin-mdx/">MDX</a> plugin.</li>
  <li>We have to put all <code class="language-plaintext highlighter-rouge">mdx</code> files in <code class="language-plaintext highlighter-rouge">/src/pages</code>. The mdx files will be renders automatically! That’s why we need to indicate <code class="language-plaintext highlighter-rouge">defaultLayouts</code> in <code class="language-plaintext highlighter-rouge">/gatsby-config.js</code><sup><a href="https://alligator.io/gatsbyjs/mdx-in-gatsby/ " target="_blank">[ref]</a></sup>
. I have tried to render mdx in <code class="language-plaintext highlighter-rouge">/content/pages/</code> but it didn’t work!</li>
  <li>For an example of using graphql in mdx file, check <code class="language-plaintext highlighter-rouge">/src/pages/about.mdx</code>.</li>
  <li>For a specific page, one can use <code class="language-plaintext highlighter-rouge">props.pageContext.frontmatter.title</code> to take the <code class="language-plaintext highlighter-rouge">title</code> of that page.</li>
  <li>For writing pages, read <a href="https://www.gatsbyjs.org/docs/mdx/writing-pages/">this</a>.</li>
</ul>

<h2 id="create-page-template-and-markdown-file-1">Create page template and markdown file</h2>

<p>Suppose that you wanna create a page <code class="language-plaintext highlighter-rouge">/about</code> taking content from file <code class="language-plaintext highlighter-rouge">/content/pages/about.md</code> and it applies template <code class="language-plaintext highlighter-rouge">/src/templates/page.js</code>. All you need to do is following <a href="https://www.gatsbyjs.org/docs/adding-markdown-pages/">this post</a>.</p>

<ol>
  <li>First, add to <code class="language-plaintext highlighter-rouge">/gatsby-config</code>.</li>
  <li>Create <code class="language-plaintext highlighter-rouge">/src/templates/page.js</code>,</li>
  <li>Create markdown file <code class="language-plaintext highlighter-rouge">/content/pages/about.md</code>.</li>
  <li>Modify <code class="language-plaintext highlighter-rouge">/gatsby-node.js</code> to tell gatsby to create a page <code class="language-plaintext highlighter-rouge">/about</code> from <code class="language-plaintext highlighter-rouge">about.md</code> using template <code class="language-plaintext highlighter-rouge">page.js</code>.</li>
</ol>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://www.gatsbyjs.org/docs/">Official documentation</a>.
    <ul>
      <li><a href="https://github.com/gatsbyjs/gatsby/tree/master/examples">Examples</a>.</li>
      <li><strong>Gatsby Docs</strong> – <a href="https://www.gatsbyjs.org/tutorial/">Tutorials (step-by-step)</a>.</li>
    </ul>
  </li>
  <li><a href="https://react-bootstrap.netlify.com/">React Bootstrap</a> – get the components.</li>
  <li><a href="https://reactjs.org/docs/hello-world.html">React Main Concepts</a> – understand some main concepts in React.</li>
  <li><a href="https://reactjs.org/docs/jsx-in-depth.html#user-defined-components-must-be-capitalized">JSX in depth</a> – understand the syntax of JSX.</li>
  <li><strong>w3schools</strong> – <a href="https://www.w3schools.com/react/default.asp">React Tutorial</a>.</li>
  <li><a href="https://www.howtographql.com/">The Fullstack Tutorial for GraphQL</a></li>
</ul>



<!-- <div class="box-error">
<h4>Notice an error?</h4>
Everything on this site is <a href="https://github.com/baotrung217/dinhanhthi.com" target="_blank">published</a> on Github. If you find something wrong, <a href="https://github.com/dinhanhthi/dinhanhthi.com/edit/master/_posts/web-dev/2019-12-16-gatsby-js.md" target="_blank">just edit it</a> or <a href="mailto:baotrung217@gmail.com?subject=Suggest to edit post 'Gatsby 101'">tell me</a> about it.
</div> -->

<div class="sec-comment">

  

  <button class="btn btn-info w-100" id="show-comments" onclick="load_comment();return false;">
    If you find something wrong or need a comment, click here.
  </button>

  <div id='comment-box' style="display: none;">
    <script src="https://utteranc.es/client.js"
            repo="dinhanhthi/dinhanhthi.com"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
  </div>

  <script>
    var comment_loaded = false;
    function load_comment() {
        if (!comment_loaded)  {
            comment_loaded = true;
            document.getElementById("show-comments").style.display = "none";
            document.getElementById("comment-box").style.display = "block";
        }
    }
  </script>
</div>

<div class="modal fade" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg modal-xl">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <img src="" class="imagepreview" style="width: 100%;" >
      </div>
    </div>
  </div>
</div>



          </article >
        </div>
      </div>
    </div>
  </section>
</main>



  <footer class="footer">
    <div class="container">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6 text-center p-3">
      <div class="footer-info">
        <a href="https://baotrung.dev" target="_blank">Trung</a>
        &nbsp;&copy;&nbsp;
        2022
        &nbsp;&bull;&nbsp;
        <a href="http://localhost:4000/about-the-notes">
          About the notes
        </a>
        &nbsp;&bull;&nbsp;
        <a href="https://pobo.dinhanhthi.com" target="_blank">
          Po Bo
        </a>
        &nbsp;&bull;&nbsp;
        <a href="/for-me-only">
          For me only
        </a>
        &nbsp;&bull;&nbsp;
        <a class="donate" href="http://localhost:4000/donate">
          Support Trung
        </a>
      </div>
    </div>
  </div>
</div>

  </footer>

  





  

  <script src="https://code.jquery.com/jquery-1.10.1.min.js" integrity="sha256-SDf34fFWX/ZnUozXXEH0AeB+Ip3hvRsjLwp6QNTEb3k=" crossorigin="anonymous" async></script>

  <!-- scrolling-toc -->
  <script src="http://localhost:4000/js/scrolling-toc.js" type="text/javascript" async></script>

  <!-- bootstrap -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous" async></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous" async></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous" async></script>

  <script src="http://localhost:4000/js/click_to_zoom.js" async></script>

  <script src="http://localhost:4000/js/anchor.js" async></script>

</body>
</html>
